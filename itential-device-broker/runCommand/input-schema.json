{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Itential Device Run Command Input Schema",
  "description": "JSON schema for input parameters to the itential-device-runcommand.py script",
  "type": "object",
  "properties": {
    "host": {
      "type": "array",
      "description": "Array of device IP addresses or hostnames",
      "minItems": 1,
      "items": {
        "type": "string"
      },
      "examples": [["192.168.1.1", "192.168.1.2"], ["router.example.com"]]
    },
    "username": {
      "type": "array",
      "description": "Array of usernames for device login (one per device)",
      "minItems": 1,
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "password": {
      "type": "array",
      "description": "Array of passwords for device login (one per device)",
      "minItems": 1,
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "device_type": {
      "type": "array",
      "description": "Array of device types - determines the netmiko device driver to use (one per device)",
      "minItems": 1,
      "items": {
        "type": "string",
        "enum": [
          "aruba",
          "asa",
          "bigip",
          "eos",
          "ios",
          "iosxr",
          "junos",
          "nxos",
          "sros"
        ]
      }
    },
    "port": {
      "type": "array",
      "description": "Array of SSH port numbers (one per device)",
      "items": {
        "type": "integer",
        "minimum": 1,
        "maximum": 65535
      }
    },
    "secret": {
      "type": "array",
      "description": "Array of enable secrets for privileged mode (one per device, primarily for Cisco devices)",
      "items": {
        "type": "string"
      }
    },
    "command": {
      "type": "string",
      "description": "Command to run on all devices",
      "minLength": 1,
      "examples": ["show version", "show interfaces", "show ip route", "show configuration"]
    }
  },
  "required": [
    "host",
    "username",
    "password",
    "device_type",
    "command"
  ],
  "additionalProperties": true,
  "examples": [
    {
      "host": ["192.168.1.1", "192.168.1.2"],
      "username": ["admin", "admin"],
      "password": ["password123", "password123"],
      "device_type": ["ios", "ios"],
      "command": "show version"
    },
    {
      "host": ["switch.example.com", "router.example.com"],
      "username": ["netadmin", "admin"],
      "password": ["secret", "password123"],
      "device_type": ["nxos", "junos"],
      "port": [2222, 22],
      "secret": ["enable_secret", null],
      "command": "show interfaces"
    }
  ]
}
